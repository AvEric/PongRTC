{"ts":1354048616647,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":true,"ts":1354048629653,"patch":[[{"diffs":[[1,"/**\r\n * @author auduno / github.com/auduno\r\n */\r\n\r\nheadtrackr.getWhitebalance = function(canvas) {\r\n    \r\n\t// returns average gray value in canvas\r\n\t\r\n\tvar avggray,avgr,avgb,avgg;\r\n\t\r\n\tvar canvasContext = canvas.getContext('2d');\r\n\tvar image = canvasContext.getImageData(0, 0, canvas.width, canvas.height);\r\n\tvar id = image.data;\r\n\tvar imagesize = image.width * image.height;\r\n\tvar r = g = b = 0;\r\n\t\r\n\tfor (var i = 0;i < imagesize;i++) {\r\n\t\tr += id[4*i];\r\n\t\tg += id[(4*i)+1];\r\n\t\tb += id[(4*i)+2];\r\n\t}\r\n\t\r\n\tavgr = r/imagesize;\r\n\tavgg = g/imagesize;\r\n\tavgb = b/imagesize;\r\n\tavggray = (avgr+avgg+avgb)/3;\r\n\t\r\n\treturn avggray;\r\n\t\r\n}"]],"start1":0,"start2":0,"length1":0,"length2":628}]],"length":628,"saved":false}
