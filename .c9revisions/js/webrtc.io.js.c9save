{"ts":1353966172101,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":true,"ts":1353966189386,"patch":[[{"diffs":[[1,"//CLIENT\r\n\r\n // Fallbacks for vendor-specific variables until the spec is finalized.\r\nvar PeerConnection = window.webkitRTCPeerConnection;\r\nvar URL = window.URL || window.webkitURL || window.msURL || window.oURL;\r\nvar getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\r\n// TODO jme- dirty to remove\r\nvar pc;\r\n\r\n(function() {\r\n\r\n  var rtc;\r\n  if ('undefined' === typeof module) {\r\n    rtc = this.rtc = {};\r\n  } else {\r\n    rtc = module.exports = {};\r\n  }\r\n\r\n \r\n  // Holds a connection to the server.\r\n  rtc._socket = null;\r\n\r\n  // Holds callbacks for certain events.\r\n  rtc._events = {};\r\n\r\n  rtc.on = function(eventName, callback) {\r\n    rtc._events[eventName] = rtc._events[eventName] || [];\r\n    rtc._events[eventName].push(callback);\r\n  };\r\n\r\n  rtc.fire = function(eventName, _) {\r\n    var events = rtc._events[eventName];\r\n    var args = Array.prototype.slice.call(arguments, 1);\r\n\r\n    if (!events) {\r\n      return;\r\n    }\r\n\r\n    for (var i = 0, len = events.length; i < len; i++) {\r\n      events[i].apply(null, args);\r\n    }\r\n  };\r\n\r\n  // Holds the STUN server to use for PeerConnections.\r\n  rtc.SERVER = {iceServers:[{url:\"stun:stun.l.google.com:19302\"}]};\r\n\r\n  // Referenc e to the lone PeerConnection instance.\r\n  rtc.peerConnections = {};\r\n\r\n  // Array of known peer socket ids\r\n  rtc.connections = [];\r\n  // Stream-related variables.\r\n  rtc.streams = [];\r\n  rtc.numStreams = 0;\r\n  rtc.initializedStreams = 0;\r\n\r\n  /**\r\n   * Connects to the websocket server.\r\n   */\r\n  rtc.connect = function(server, room) {\r\n    room = room || \"\"; // by default, join a room called the blank string\r\n    rtc._socket = new WebSocket(server);\r\n\r\n    rtc._socket.onopen = function() {\r\n\r\n      rtc._socket.send(JSON.stringify({\r\n        \"eventName\": \"join_room\",\r\n        \"data\":{\r\n          \"room\": room\r\n        }\r\n      }), function(error){\r\n          if(error){console.log(error);}\r\n        });\r\n\r\n      rtc._socket.onmessage = function(msg) {\r\n        var json = JSON.parse(msg.data);\r\n        rtc.fire(json.eventName, json.data);\r\n      };\r\n\r\n      rtc._socket.onerror = function(err) {\r\n        console.log('onerror');\r\n        console.log(err);\r\n      };\r\n\r\n      rtc._socket.onclose = function(data) {\r\n        rtc.fire('disconnect stream', rtc._socket.id);\r\n        delete rtc.peerConnections[rtc._socket.id];\r\n      };\r\n\r\n      rtc.on('get_peers', function(data) {\r\n        rtc.connections = data.connections;\r\n        // fire connections event and pass peers\r\n        rtc.fire('connections', rtc.connections);\r\n      });\r\n\r\n      rtc.on('receive_ice_candidate', function(data) {\r\n        var candidate = new RTCIceCandidate(data);\r\n        rtc.peerConnections[data.socketId].addIceCandidate(candidate);\r\n        \r\n        rtc.fire('receive ice candidate', candidate);\r\n      });\r\n\r\n      rtc.on('new_peer_connected', function(data) {\r\n        rtc.connections.push(data.socketId);\r\n\r\n        var pc = rtc.createPeerConnection(data.socketId);\r\n        for (var i = 0; i < rtc.streams.length; i++) {\r\n          var stream = rtc.streams[i];\r\n          pc.addStream(stream);\r\n        }\r\n      });\r\n\r\n      rtc.on('remove_peer_connected', function(data) {  \r\n        rtc.fire('disconnect stream', data.socketId);\r\n        delete rtc.peerConnections[data.socketId];\r\n      });\r\n\r\n      rtc.on('receive_offer', function(data) {\r\n        rtc.receiveOffer(data.socketId, data.sdp);\r\n        rtc.fire('receive offer', data);\r\n      });\r\n\r\n      rtc.on('receive_answer', function(data) {\r\n        rtc.receiveAnswer(data.socketId, data.sdp);\r\n        rtc.fire('receive answer', data);\r\n      });\r\n\r\n      rtc.fire('connect');\r\n    };\r\n  };\r\n\r\n\r\n  rtc.sendOffers = function() {\r\n    for (var i = 0, len = rtc.connections.length; i < len; i++) {\r\n      var socketId = rtc.connections[i];\r\n      rtc.sendOffer(socketId);\r\n    }\r\n  }\r\n\r\n  rtc.onClose = function(data) {\r\n    rtc.on('close_stream', function() {\r\n      rtc.fire('close_stream', data);\r\n    });\r\n  }\r\n\r\n  rtc.createPeerConnections = function() {\r\n    for (var i = 0; i < rtc.connections.length; i++) {\r\n      rtc.createPeerConnection(rtc.connections[i]);\r\n    }\r\n  };\r\n\r\n  rtc.createPeerConnection = function(id) {\r\n    console.log('createPeerConnection');\r\n    var pc = rtc.peerConnections[id] = new PeerConnection(rtc.SERVER); \r\n    pc.onicecandidate = function(event) {\r\n      if (event.candidate) {\r\n        rtc._socket.send(JSON.stringify({\r\n          \"eventName\": \"send_ice_candidate\",\r\n          \"data\": {\r\n            \"candidate\": event.candidate.candidate,\r\n            \"socketId\": id\r\n          }\r\n        }), function(error){\r\n          if(error){console.log(error);}\r\n        });\r\n      }\r\n      rtc.fire('ice candidate', event.candidate);\r\n    };\r\n\r\n    pc.onopen = function() {\r\n      // TODO: Finalize this API\r\n      rtc.fire('peer connection opened');\r\n    };\r\n\r\n    pc.onaddstream = function(event) {\r\n      // TODO: Finalize this API\r\n      rtc.fire('add remote stream', event.stream, id);\r\n    };\r\n    return pc;\r\n  };\r\n\r\n  rtc.sendOffer = function(socketId) {\r\n    var pc = rtc.peerConnections[socketId];\r\n    // TODO: Abstract away video: true, audio: true for offers\r\n    pc.createOffer( function(session_description) {\r\n      pc.setLocalDescription(session_description);\r\n      rtc._socket.send(JSON.stringify({\r\n        \"eventName\": \"send_offer\",\r\n        \"data\": {\r\n          \"socketId\": socketId,\r\n          \"sdp\": session_description\r\n        }\r\n      }), function(error){\r\n            if(error){console.log(error);}\r\n          });\r\n    });\r\n  };\r\n\r\n\r\n  rtc.receiveOffer = function(socketId, sdp) {\r\n    var pc = rtc.peerConnections[socketId];\r\n    pc.setRemoteDescription(new RTCSessionDescription(sdp));\r\n    rtc.sendAnswer(socketId);\r\n  };\r\n\r\n\r\n  rtc.sendAnswer = function(socketId) {\r\n    var pc = rtc.peerConnections[socketId];\r\n    // TODO: Abstract away video: true, audio: true for answers\r\n      pc.createAnswer( function(session_description) {\r\n      pc.setLocalDescription(session_description);\r\n      rtc._socket.send(JSON.stringify({\r\n        \"eventName\": \"send_answer\",\r\n        \"data\":{\r\n          \"socketId\": socketId,\r\n          \"sdp\": session_description\r\n        }\r\n      }), function(error){\r\n            if(error){console.log(error);}\r\n          });\r\n    });\r\n  };\r\n\r\n  rtc.receiveAnswer = function(socketId, sdp) {\r\n    var pc = rtc.peerConnections[socketId];\r\n    pc.setRemoteDescription(new RTCSessionDescription(sdp));\r\n  };\r\n\r\n\r\n  rtc.createStream = function(opt, onSuccess, onFail) {\r\n    var options;\r\n    onSuccess = onSuccess ||\r\n    function() {};\r\n    onFail = onFail ||\r\n    function() {};\r\n\r\n    if(opt.audio && opt.video){\r\n      options = {\r\n        video: true,\r\n        audio: true\r\n      };\r\n    }else if(opt.video){\r\n      options = {\r\n        video: true,\r\n        audio: false\r\n      };\r\n    }else if(opt.audio){\r\n      options = {\r\n        video: false,\r\n        audio: true\r\n      };\r\n    }else {\r\n      options = {\r\n        video: false,\r\n        audio: false\r\n      };\r\n    }\r\n\r\n    if (getUserMedia) {\r\n      rtc.numStreams++;\r\n      getUserMedia.call(navigator, options, function(stream) {\r\n        \r\n        rtc.streams.push(stream);\r\n        rtc.initializedStreams++;\r\n        onSuccess(stream);\r\n        if (rtc.initializedStreams === rtc.numStreams) {\r\n          rtc.fire('ready');\r\n        }\r\n      }, function() {\r\n        alert(\"Could not connect stream.\");\r\n        onFail();\r\n      });\r\n    } else {\r\n      alert('webRTC is not yet supported in this browser.');\r\n    }\r\n  }\r\n\r\n\r\n  rtc.addStreams = function() {\r\n    for (var i = 0; i < rtc.streams.length; i++) {\r\n      var stream = rtc.streams[i];\r\n      for (var connection in rtc.peerConnections) {\r\n        rtc.peerConnections[connection].addStream(stream);\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  rtc.attachStream = function(stream, domId) {\r\n    document.getElementById(domId).src = URL.createObjectURL(stream);\r\n  };\r\n\r\n  rtc.on('ready', function() {\r\n    rtc.createPeerConnections();\r\n    rtc.addStreams();\r\n    rtc.sendOffers();\r\n  });\r\n\r\n}).call(this);"]],"start1":0,"start2":0,"length1":0,"length2":8113}]],"length":8113,"saved":false}
{"contributors":[],"silentsave":true,"ts":1354727185137,"patch":[[{"diffs":[[0,"lized.\r\n"],[1,"    \r\n"],[0,"var Peer"]],"start1":78,"start2":78,"length1":16,"length2":22},{"diffs":[[0,"ection ="],[1," window.PeerConnection ||"],[0," window."]],"start1":104,"start2":104,"length1":16,"length2":41},{"diffs":[[0,"ia;\r"],[-1,"\n// TODO jme- dirty to remove\r\nvar pc;\r"],[0,"\n\r\n("]],"start1":373,"start2":373,"length1":47,"length2":8},{"diffs":[[0,"= null;\r"],[1,"\n  \r\n  // Holds identity for the client\r\n  rtc._me = null;\r"],[0,"\n\r\n  // "]],"start1":583,"start2":583,"length1":16,"length2":75},{"diffs":[[0,"the STUN"],[-1,""],[0,""],[1,"/ICE"],[0," server "]],"start1":1179,"start2":1179,"length1":16,"length2":20},{"diffs":[[0,"nnections;\r\n"],[1,"        rtc._me = data.you;\r\n"],[0,"        // f"]],"start1":2533,"start2":2533,"length1":24,"length2":53},{"diffs":[[0,"ata) {\r\n    "],[-1,"    "],[1,"\t"],[0,"var candidat"]],"start1":2736,"start2":2736,"length1":28,"length2":25},{"diffs":[[0,"data);\r\n    "],[-1,"    "],[1,"\t"],[0,"rtc.peerConn"]],"start1":2785,"start2":2785,"length1":28,"length2":25},{"diffs":[[0,"date);\r\n"],[-1,"        \r\n"],[0,"        "]],"start1":2854,"start2":2854,"length1":26,"length2":16},{"diffs":[[0,"SERVER);"],[-1," "],[0,"\r\n    pc"]],"start1":4415,"start2":4415,"length1":17,"length2":16},{"diffs":[[0," {\r\n        "],[1," "],[0,"rtc._socket."]],"start1":4494,"start2":4494,"length1":24,"length2":25},{"diffs":[[0,"ON.stringify({\r\n"],[1," "],[0,"          \"event"]],"start1":4526,"start2":4526,"length1":32,"length2":33},{"diffs":[[0,"te\",\r\n          "],[1," "],[0,"\"data\": {\r\n     "]],"start1":4583,"start2":4583,"length1":32,"length2":33},{"diffs":[[0,"     \"data\": {\r\n"],[1,"              \"label\": event.candidate.label,\r\n  "],[0,"            \"can"]],"start1":4595,"start2":4595,"length1":32,"length2":81},{"diffs":[[0,"candidate,\r\n"],[1,"  "],[0,"            "]],"start1":4701,"start2":4701,"length1":24,"length2":26},{"diffs":[[0,"\r\n          "],[1," "],[0,"}\r\n"],[1," "],[0,"        }), "]],"start1":4741,"start2":4741,"length1":27,"length2":29},{"diffs":[[0,"nction(error){\r\n"],[1," "],[0,"          if(err"]],"start1":4772,"start2":4772,"length1":32,"length2":33},{"diffs":[[0,"e.log(error);}\r\n"],[1," "],[0,"        });\r\n   "]],"start1":4815,"start2":4815,"length1":32,"length2":33},{"diffs":[[0," });\r\n      "],[1," "],[0,"}\r\n"],[1," "],[0,"      rtc.fi"]],"start1":4839,"start2":4839,"length1":27,"length2":29},{"diffs":[[0,"andidate);\r\n"],[1," "],[0,"    };\r\n\r\n  "]],"start1":4895,"start2":4895,"length1":24,"length2":25},{"diffs":[[0,"];\r\n"],[-1,"    // TODO: Abstract away video: true, audio: true for offers\r\n"],[0,"    "]],"start1":5278,"start2":5278,"length1":72,"length2":8},{"diffs":[[0,"description) {\r\n"],[-1,"  "],[0,"    pc.setLocalD"]],"start1":5319,"start2":5319,"length1":34,"length2":32},{"diffs":[[0,"cription);\r\n    "],[-1,"  "],[0,"rtc._socket.send"]],"start1":5373,"start2":5373,"length1":34,"length2":32},{"diffs":[[0,"\n        \"data\":"],[-1," "],[0,"{\r\n"],[1,"  "],[0,"          \"socke"]],"start1":5459,"start2":5459,"length1":36,"length2":37},{"diffs":[[0,"tId,\r\n          "],[1,"  "],[0,"\"sdp\": session_d"]],"start1":5507,"start2":5507,"length1":32,"length2":34},{"diffs":[[0,"iption\r\n        "],[1," "],[1,"   "],[0,"}\r\n"],[1,"  "],[0,"      }), functi"]],"start1":5545,"start2":5545,"length1":35,"length2":41},{"diffs":[[0,"sole.log(error);"],[-1,"}"],[0,"\r\n          });\r"]],"start1":5623,"start2":5623,"length1":33,"length2":32},{"diffs":[[0,"error);\r\n       "],[1," }\r\n"],[0,"   });\r\n    });\r"]],"start1":5632,"start2":5632,"length1":32,"length2":36},{"diffs":[[0,"];\r\n"],[-1,"    // TODO: Abstract away video: true, audio: true for answers\r\n  "],[0,"    "]],"start1":5957,"start2":5957,"length1":75,"length2":8},{"diffs":[[0," {\r\n    "],[-1,"  "],[0,"pc.setLo"]],"start1":6011,"start2":6011,"length1":18,"length2":16},{"diffs":[[0,"cription);\r\n"],[-1,"  "],[0,"    rtc._soc"]],"start1":6053,"start2":6053,"length1":26,"length2":24},{"diffs":[[0,"a\":{\r\n          "],[1,"  "],[0,"\"socketId\": sock"]],"start1":6153,"start2":6153,"length1":32,"length2":34},{"diffs":[[0,"Id\": socketId,\r\n"],[1,"  "],[0,"          \"sdp\":"]],"start1":6178,"start2":6178,"length1":32,"length2":34},{"diffs":[[0,"iption\r\n        "],[1,"    "],[0,"}\r\n"],[1,"  "],[0,"      }), functi"]],"start1":6226,"start2":6226,"length1":35,"length2":41},{"diffs":[[0,"sole.log(error);"],[-1,"}"],[0,"\r\n          });\r"]],"start1":6304,"start2":6304,"length1":33,"length2":32},{"diffs":[[0,");\r\n        "],[-1,"  })"],[1,"}\r\n   });\r\n    var offer = pc.remoteDescription"],[0,";\r\n    });\r\n"]],"start1":6318,"start2":6318,"length1":28,"length2":71},{"diffs":[[0,";\r\n    });\r\n  };"],[-1,""],[0,""],[1,"\r\n"],[0,"\r\n\r\n  rtc.receiv"]],"start1":6377,"start2":6377,"length1":32,"length2":34}]],"length":8168,"saved":false}
{"ts":1354727213296,"patch":[[{"diffs":[[0,"lized.\r\n"],[-1,"    \r\n"],[0,"var Peer"]],"start1":78,"start2":78,"length1":22,"length2":16},{"diffs":[[0,"on ="],[-1," window.PeerConnection ||"],[0," win"]],"start1":102,"start2":102,"length1":33,"length2":8},{"diffs":[[0,"rMedia;\r"],[1,"\n// TODO jme- dirty to remove\r\nvar pc;\r"],[0,"\n\r\n(func"]],"start1":338,"start2":338,"length1":16,"length2":55},{"diffs":[[0,"ll;\r"],[-1,"\n  \r\n  // Holds identity for the client\r\n  rtc._me = null;\r"],[0,"\n\r\n "]],"start1":595,"start2":595,"length1":67,"length2":8},{"diffs":[[0,"STUN"],[-1,"/ICE"],[0,""],[1,""],[0," ser"]],"start1":1132,"start2":1132,"length1":12,"length2":8},{"diffs":[[0,"s;\r\n"],[-1,"        rtc._me = data.you;\r\n"],[0,"    "]],"start1":2486,"start2":2486,"length1":37,"length2":8},{"diffs":[[0," {\r\n    "],[-1,"\t"],[1,"    "],[0,"var cand"]],"start1":2656,"start2":2656,"length1":17,"length2":20},{"diffs":[[0,"    "],[-1,"\t"],[1,"    "],[0,"rtc."]],"start1":2712,"start2":2712,"length1":9,"length2":12},{"diffs":[[0,"andidate);\r\n"],[1,"        \r\n"],[0,"        rtc."]],"start1":2772,"start2":2772,"length1":24,"length2":34},{"diffs":[[0,"SERVER);"],[1," "],[0,"\r\n    pc"]],"start1":4347,"start2":4347,"length1":16,"length2":17},{"diffs":[[0," {\r\n        "],[-1," "],[0,"rtc._socket."]],"start1":4427,"start2":4427,"length1":25,"length2":24},{"diffs":[[0,"tringify({\r\n"],[-1," "],[0,"          \"e"]],"start1":4462,"start2":4462,"length1":25,"length2":24},{"diffs":[[0,"\r\n          "],[-1," "],[0,"\"data\": {\r\n "]],"start1":4518,"start2":4518,"length1":25,"length2":24},{"diffs":[[0," {\r\n"],[-1,"              \"label\": event.candidate.label,\r\n  "],[0,"    "]],"start1":4537,"start2":4537,"length1":57,"length2":8},{"diffs":[[0,"candidate,\r\n"],[-1,"  "],[0,"            "]],"start1":4582,"start2":4582,"length1":26,"length2":24},{"diffs":[[0,"\r\n          "],[-1," "],[0,"}\r\n"],[-1," "],[0,"        }), "]],"start1":4620,"start2":4620,"length1":29,"length2":27},{"diffs":[[0,"nction(error){\r\n"],[-1," "],[0,"          if(err"]],"start1":4649,"start2":4649,"length1":33,"length2":32},{"diffs":[[0,"g(error);}\r\n"],[-1," "],[0,"        });\r"]],"start1":4695,"start2":4695,"length1":25,"length2":24},{"diffs":[[0," });\r\n      "],[-1," "],[0,"}\r\n"],[-1," "],[0,"      rtc.fi"]],"start1":4714,"start2":4714,"length1":29,"length2":27},{"diffs":[[0,"andidate);\r\n"],[-1," "],[0,"    };\r\n\r\n  "]],"start1":4768,"start2":4768,"length1":25,"length2":24},{"diffs":[[0,"ons[socketId];\r\n"],[1,"    // TODO: Abstract away video: true, audio: true for offers\r\n"],[0,"    pc.createOff"]],"start1":5138,"start2":5138,"length1":32,"length2":96},{"diffs":[[0,"description) {\r\n"],[1,"  "],[0,"    pc.setLocalD"]],"start1":5255,"start2":5255,"length1":32,"length2":34},{"diffs":[[0,"cription);\r\n    "],[1,"  "],[0,"rtc._socket.send"]],"start1":5311,"start2":5311,"length1":32,"length2":34},{"diffs":[[0,"\n        \"data\":"],[1," "],[0,"{\r\n"],[-1,"  "],[0,"          \"socke"]],"start1":5399,"start2":5399,"length1":37,"length2":36},{"diffs":[[0,"tId,\r\n          "],[-1,"  "],[0,"\"sdp\": session_d"]],"start1":5446,"start2":5446,"length1":34,"length2":32},{"diffs":[[0,"on\r\n        "],[-1," "],[-1,"   "],[0,"}\r\n"],[-1,"  "],[0,"      }), fu"]],"start1":5486,"start2":5486,"length1":33,"length2":27},{"diffs":[[0,"sole.log(error);"],[1,"}"],[0,"\r\n        }\r\n   "]],"start1":5554,"start2":5554,"length1":32,"length2":33},{"diffs":[[0,"rror);}\r\n       "],[-1," }\r\n"],[0,"   });\r\n    });\r"]],"start1":5564,"start2":5564,"length1":36,"length2":32},{"diffs":[[0,"socketId];\r\n"],[1,"    // TODO: Abstract away video: true, audio: true for answers\r\n  "],[0,"    pc.creat"]],"start1":5877,"start2":5877,"length1":24,"length2":91},{"diffs":[[0,"ion) {\r\n    "],[1,"  "],[0,"pc.setLocalD"]],"start1":6002,"start2":6002,"length1":24,"length2":26},{"diffs":[[0,"cription);\r\n"],[1,"  "],[0,"    rtc._soc"]],"start1":6050,"start2":6050,"length1":24,"length2":26},{"diffs":[[0,"a\":{\r\n          "],[-1,"  "],[0,"\"socketId\": sock"]],"start1":6152,"start2":6152,"length1":34,"length2":32},{"diffs":[[0,"Id\": socketId,\r\n"],[-1,"  "],[0,"          \"sdp\":"]],"start1":6175,"start2":6175,"length1":34,"length2":32},{"diffs":[[0,"on\r\n        "],[-1,"    "],[0,"}\r\n"],[-1,"  "],[0,"      }), fu"]],"start1":6225,"start2":6225,"length1":33,"length2":27},{"diffs":[[0,"(error);"],[1,"}"],[0,"\r\n      "]],"start1":6301,"start2":6301,"length1":16,"length2":17},{"diffs":[[0,"    "],[-1,"}\r\n   });\r\n    var offer = pc.remoteDescription"],[1,"  })"],[0,";\r\n "]],"start1":6316,"start2":6316,"length1":55,"length2":12},{"diffs":[[0,";\r\n    });\r\n  };"],[-1,"\r\n"],[0,""],[1,""],[0,"\r\n\r\n  rtc.receiv"]],"start1":6324,"start2":6324,"length1":34,"length2":32}]],"length":8113,"saved":false}
{"ts":1354727238261,"patch":[[{"diffs":[[0,"lized.\r\n"],[1,"    \r\n"],[0,"var Peer"]],"start1":78,"start2":78,"length1":16,"length2":22},{"diffs":[[0,"ection ="],[1," window.PeerConnection ||"],[0," window."]],"start1":104,"start2":104,"length1":16,"length2":41},{"diffs":[[0,"ia;\r"],[-1,"\n// TODO jme- dirty to remove\r\nvar pc;\r"],[0,"\n\r\n("]],"start1":373,"start2":373,"length1":47,"length2":8},{"diffs":[[0,"= null;\r"],[1,"\n  \r\n  // Holds identity for the client\r\n  rtc._me = null;\r"],[0,"\n\r\n  // "]],"start1":583,"start2":583,"length1":16,"length2":75},{"diffs":[[0,"the STUN"],[-1,""],[0,""],[1,"/ICE"],[0," server "]],"start1":1179,"start2":1179,"length1":16,"length2":20},{"diffs":[[0,"nnections;\r\n"],[1,"        rtc._me = data.you;\r\n"],[0,"        // f"]],"start1":2533,"start2":2533,"length1":24,"length2":53},{"diffs":[[0,"ata) {\r\n    "],[-1,"    "],[1,"\t"],[0,"var candidat"]],"start1":2736,"start2":2736,"length1":28,"length2":25},{"diffs":[[0,"data);\r\n    "],[-1,"    "],[1,"\t"],[0,"rtc.peerConn"]],"start1":2785,"start2":2785,"length1":28,"length2":25},{"diffs":[[0,"date);\r\n"],[-1,"        \r\n"],[0,"        "]],"start1":2854,"start2":2854,"length1":26,"length2":16},{"diffs":[[0,"SERVER);"],[-1," "],[0,"\r\n    pc"]],"start1":4415,"start2":4415,"length1":17,"length2":16},{"diffs":[[0," {\r\n        "],[1," "],[0,"rtc._socket."]],"start1":4494,"start2":4494,"length1":24,"length2":25},{"diffs":[[0,"ON.stringify({\r\n"],[1," "],[0,"          \"event"]],"start1":4526,"start2":4526,"length1":32,"length2":33},{"diffs":[[0,"te\",\r\n          "],[1," "],[0,"\"data\": {\r\n     "]],"start1":4583,"start2":4583,"length1":32,"length2":33},{"diffs":[[0,"     \"data\": {\r\n"],[1,"              \"label\": event.candidate.label,\r\n  "],[0,"            \"can"]],"start1":4595,"start2":4595,"length1":32,"length2":81},{"diffs":[[0,"candidate,\r\n"],[1,"  "],[0,"            "]],"start1":4701,"start2":4701,"length1":24,"length2":26},{"diffs":[[0,"\r\n          "],[1," "],[0,"}\r\n"],[1," "],[0,"        }), "]],"start1":4741,"start2":4741,"length1":27,"length2":29},{"diffs":[[0,"nction(error){\r\n"],[1," "],[0,"          if(err"]],"start1":4772,"start2":4772,"length1":32,"length2":33},{"diffs":[[0,"e.log(error);}\r\n"],[1," "],[0,"        });\r\n   "]],"start1":4815,"start2":4815,"length1":32,"length2":33},{"diffs":[[0," });\r\n      "],[1," "],[0,"}\r\n"],[1," "],[0,"      rtc.fi"]],"start1":4839,"start2":4839,"length1":27,"length2":29},{"diffs":[[0,"andidate);\r\n"],[1," "],[0,"    };\r\n\r\n  "]],"start1":4895,"start2":4895,"length1":24,"length2":25},{"diffs":[[0,"];\r\n"],[-1,"    // TODO: Abstract away video: true, audio: true for offers\r\n"],[0,"    "]],"start1":5278,"start2":5278,"length1":72,"length2":8},{"diffs":[[0,"description) {\r\n"],[-1,"  "],[0,"    pc.setLocalD"]],"start1":5319,"start2":5319,"length1":34,"length2":32},{"diffs":[[0,"cription);\r\n    "],[-1,"  "],[0,"rtc._socket.send"]],"start1":5373,"start2":5373,"length1":34,"length2":32},{"diffs":[[0,"\n        \"data\":"],[-1," "],[0,"{\r\n"],[1,"  "],[0,"          \"socke"]],"start1":5459,"start2":5459,"length1":36,"length2":37},{"diffs":[[0,"tId,\r\n          "],[1,"  "],[0,"\"sdp\": session_d"]],"start1":5507,"start2":5507,"length1":32,"length2":34},{"diffs":[[0,"iption\r\n        "],[1," "],[1,"   "],[0,"}\r\n"],[1,"  "],[0,"      }), functi"]],"start1":5545,"start2":5545,"length1":35,"length2":41},{"diffs":[[0,"sole.log(error);"],[-1,"}"],[0,"\r\n          });\r"]],"start1":5623,"start2":5623,"length1":33,"length2":32},{"diffs":[[0,"error);\r\n       "],[1," }\r\n"],[0,"   });\r\n    });\r"]],"start1":5632,"start2":5632,"length1":32,"length2":36},{"diffs":[[0,"];\r\n"],[-1,"    // TODO: Abstract away video: true, audio: true for answers\r\n  "],[0,"    "]],"start1":5957,"start2":5957,"length1":75,"length2":8},{"diffs":[[0," {\r\n    "],[-1,"  "],[0,"pc.setLo"]],"start1":6011,"start2":6011,"length1":18,"length2":16},{"diffs":[[0,"cription);\r\n"],[-1,"  "],[0,"    rtc._soc"]],"start1":6053,"start2":6053,"length1":26,"length2":24},{"diffs":[[0,"a\":{\r\n          "],[1,"  "],[0,"\"socketId\": sock"]],"start1":6153,"start2":6153,"length1":32,"length2":34},{"diffs":[[0,"Id\": socketId,\r\n"],[1,"  "],[0,"          \"sdp\":"]],"start1":6178,"start2":6178,"length1":32,"length2":34},{"diffs":[[0,"iption\r\n        "],[1,"    "],[0,"}\r\n"],[1,"  "],[0,"      }), functi"]],"start1":6226,"start2":6226,"length1":35,"length2":41},{"diffs":[[0,"sole.log(error);"],[-1,"}"],[0,"\r\n          });\r"]],"start1":6304,"start2":6304,"length1":33,"length2":32},{"diffs":[[0,");\r\n        "],[-1,"  })"],[1,"}\r\n   });\r\n    var offer = pc.remoteDescription"],[0,";\r\n    });\r\n"]],"start1":6318,"start2":6318,"length1":28,"length2":71},{"diffs":[[0,";\r\n    });\r\n  };"],[-1,""],[0,""],[1,"\r\n"],[0,"\r\n\r\n  rtc.receiv"]],"start1":6377,"start2":6377,"length1":32,"length2":34}]],"length":8168,"saved":false}
{"ts":1354727472830,"patch":[[{"diffs":[[0,"rtc;\r\n  "],[1,"//"],[0,"if ('und"]],"start1":403,"start2":403,"length1":16,"length2":18}]],"length":8170,"saved":false}
{"ts":1354727474434,"patch":[[{"diffs":[[0," {};\r\n  "],[1,"//"],[0,"} else {"]],"start1":471,"start2":471,"length1":16,"length2":18}]],"length":8172,"saved":false}
{"ts":1354727476881,"patch":[[{"diffs":[[0,"ts = {};\r\n  "],[1,"//"],[0,"}\r\n\r\n \r\n  //"]],"start1":513,"start2":513,"length1":24,"length2":26}]],"length":8174,"saved":false}
{"ts":1354727479327,"patch":[[{"diffs":[[0," {\r\n"],[-1,"    rtc = module.exports = {};\r\n"],[0,"  //"]],"start1":487,"start2":487,"length1":40,"length2":8}]],"length":8142,"saved":false}
{"ts":1354727479801,"patch":[[{"diffs":[[0,"else {\r\n"],[1,"    //rtc = module.exports = {};\r\n"],[0,"  //}\r\n\r"]],"start1":483,"start2":483,"length1":16,"length2":50}]],"length":8176,"saved":false}
{"ts":1354727517164,"patch":[[{"diffs":[[0,"rtc;\r\n  "],[-1,"/"],[0,"/if ('un"]],"start1":403,"start2":403,"length1":17,"length2":16},{"diffs":[[0," {};\r\n  "],[-1,"//"],[0,"} else {"]],"start1":470,"start2":470,"length1":18,"length2":16},{"diffs":[[0," {\r\n    "],[-1,"//"],[0,"rtc = mo"]],"start1":484,"start2":484,"length1":18,"length2":16},{"diffs":[[0," {};\r\n  "],[-1,"//"],[0,"}\r\n\r\n \r\n"]],"start1":514,"start2":514,"length1":18,"length2":16}]],"length":8169,"saved":false}
{"ts":1354727518906,"patch":[[{"diffs":[[0,"rtc;\r\n  "],[-1,"/"],[0,"if ('und"]],"start1":403,"start2":403,"length1":17,"length2":16}]],"length":8168,"saved":false}
